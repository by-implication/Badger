@(message: String)

@main("BudgetBadger") {

	<div ng-controller="App">

		<section>
			<main>
				<div id="sidebar">
					<nav>
						<a ui-if="focus.parent" ng-href="{{parentLink(focus)}}">
							<i class="fa fa-chevron-left"></i>
							{{focus.parent.name}}
						</a>
						<span ui-if="!focus.parent">
							Top level
						</span>
					</nav>
					
					<div class="data">

						<h2 ui-if="focus.kind == 'loc'">
							{{focus.name}}
						</h2>

						<h2 ui-if="focus.kind == 'leaf'">
							LEAF
						</h2>

						<ng-include src="'/assets/templates/rateStub.html'"
						onload="item = focus"></ng-include>

						<a ui-if="focus.kind =='leaf'" href="#" ng-click="toggleComments()">
							{{commentsShowHide()}} comments
						</a>

						<ul>
							<li>
								{{focus.date}}
							</li>
							<li>
								{{focus.amount}}
							</li>
						</ul>
					</div>
					<!--
					<div class="sort-n-filter">
						<button>
							<i class="fa fa-filter"></i>
						</button>
					</div>
					-->
					<ul class="children">
						<li ng-repeat="child in focus.children.locs"
							ng-include="'/assets/templates/locStub.html'">
						</li>
						<li ng-repeat="child in focus.children.leaves"
							ng-include="'/assets/templates/leafStub.html'">
						</li>
					</ul>
				</div>

				<div id="main-view">
					<div id="map">
					</div>
					<div id="comment-view" ng-show="commentsVisible">
						<div class="content">
							<div class="header">
								<button class="close" ng-click="toggleComments()">
									<i class="fa fa-times"></i>
								</button>
								<h3>
									Comments on {{focus.name}}
								</h3>
							</div>
							<div class="user-rating">
								<!--<h4>Rate:</h4>
								<div ng-controller="Ratings" class="rating" ng-class="{rated: focus.userrating}">
								  <span class="ratings">
								    <span class="rating" title="{{roundFix(focus.rating)}} star(s)">
								      <i class="fa fa-star-o" ng-repeat="star in stars"></i>
								    </span>
								    <span class="apply-rating">
								      <i ng-repeat="star in stars" class="fa fa-star" ng-click="rateProject(focus, star)"></i>
								    </span>
								  </span>
								</div>-->
								<h4>Comment:</h4>
								<textarea placeholder="Please be civil!"></textarea>
								<button>Submit</button>
							</div>

							<div class="comments">
								<ul ui-if="currentComments().length">
									<li ng-repeat="comment in currentComments() | orderBy:timestamp ">
										<ng-include src="'/assets/templates/commentStub.html'"></ng-include>
									</li>
								</ul>
								<div ui-if="!currentComments().length" class="empty">
									<p>
										No comments yet. You can be the first!
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
		</section>
	</div>
	<script src="@routes.Assets.at("leaflet/leaflet.js")"></script>
    <script src="@routes.Assets.at("javascripts/map-sample.js")"></script>
    
}
