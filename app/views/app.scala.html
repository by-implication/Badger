@(message: String)

@main("BudgetBadger") {

	<div ng-controller="App">

		<section>
			<main>
				<div id="sidebar">
					<nav>
						<a ui-if="node.parent" ng-href="{{nodeLink(node.parent)}}">
							<i class="fa fa-chevron-left"></i> {{focus.parent}}
						</a>
						<span ui-if="!node.parent">
							ORPHAN
						</span>
					</nav>

					<div class="data">
						<h2>
							{{focus.name}}
						</h2>
						<ng-include src="'/assets/templates/rateStub.html'"
						onload="item = focus"></ng-include>
						<a href="#" ng-click="showComments()">{{focus.numrates}} comments</a>
						<ul>
							<li>
								{{focus.date}}
							</li>
							<li>
								{{focus.amount}}
							</li>
						</ul>
					</div>
					<div class="sort-n-filter">
						<button>
							<i class="fa fa-filter"></i>
						</button>
					</div>
					<ul class="children">
						<li ng-repeat="child in focus.children"
							ng-include="'/assets/templates/itemStub.html'">
						</li>
					</ul>
				</div>

				<div id="main-view">
					<div id="map">
					</div>
					<div id="comments" ng-show="commentsVisible">
						<div class="header">
							<button class="close" ng-click="hideComments()">
								<i class="fa fa-times"></i>
							</button>
							<h3>
								Comments on {{focus.name}}
							</h3>
						</div>
						<div ng-controller="Ratings" class="rating" ng-class="{rated: focus.userrating}">
						  <span class="ratings">
						    <span class="rating" title="{{roundFix(focus.rating)}} star(s)">
						      <i class="fa" ng-repeat="star in stars" ng-class="starClass(focus, star)"></i>
						    </span>
						    <span class="apply-rating">
						      <i ng-repeat="star in stars" class="fa fa-star" ng-click="rateProject(focus, star)"></i>
						    </span>
						  </span>
						  <span class="numrates">
						    ({{focus.ratings}} rating<span ui-if="focus.ratings > 1">s</span>)
						  </span>
						</div>
						<textarea></textarea>
						<div ui-if="focus.comments">
							<div ui-if="focus.comments.length">
								<div ng-repeat="comment in focus.comments | orderBy:timestamp ">
									{{comment.user}} : {{comment.content}} [{{comment.timestamp}}]
								</div>
							</div>
							<div ui-if="!focus.comments.length">
								<p>
									No comments
								</p>
							</div>
						</div>
					</div>
				</div>
			</main>
		</section>
	</div>
	<script src="//cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/map-sample.js")"></script>
    
}
